!function($){$.fn.extend({paginate:{version:"0.0.1.1",author:"lly219@gmail.com"}});var dpuuid=(new Date).getTime(),PROP_NAME="paginate",Paginate=function(){this._defaults={styleClass:{pageCountClass:"pagination-pageCount",goPageClass:"pagination-goPage",prePageClass:"pagination-prePage",nextPageClass:"pagination-nextPage",lastPageClass:"pagination-lastPage",firstPageClass:"pagination-firstPage",prePageHoverClass:"pagination-prePageHover",nextPageHoverClass:"pagination-nextPageHover",lastPageHoverClass:"pagination-lastPageHover",firstPageHoverClass:"pagination-fitstPageHover",goInputClass:"pagination-goInput",submitClass:"pagination-submit",pageClass:"pagination-page",pageHoverClass:"pagination-pageHover",pageCurrentClass:"pagination-pageCurrent",paginationClass:"pagination-pagination"},pageCount:1,currentPage:1,windowSize:5,bindEvent:"",isGoTo:!0,isPageCount:!0,theme:"default",errorMessage:void 0,style:"taobao",firstPage:"",lastPage:"",nextPage:"",previousPage:""}};$.extend(Paginate.prototype,{_attach:function(a,e){a.id||(this.uuid++,a.id="dp"+this.uuid);var t=this._newInst($(a));t.settings=$.extend({},e||{}),$.data(a,PROP_NAME,t),this._init(a)},_newInst:function(a){var e=a[0].id.replace(/([^A-Za-z0-9_])/g,"\\\\$1");return{id:e}},_getInst:function(a){try{return $.data(a,PROP_NAME)}catch(e){throw"Missing instance data for this pagination"}},_destroyPagination:function(){},_updatePagination:function(a,e){var t=this._getInst(a),s=t.settings;for(var n in e)"string"==typeof e[n]||"data"===n||"number"==typeof e[n]?s[n]=e[n]:s[n]=$.extend(s[n],e[n]);$.paginate._build(a)},_init:function(a){var e=this._getInst(a),t=e.id,s=e.settings;$("#"+t).append("<div id='"+t+"Pagination' class='"+$.paginate._getDefaults($.paginate._defaults,s,"styleClass").paginationClass+"'></div>"),this._build(a)},_build:function(a){var e=this._getInst(a),t=e.id,s=e.settings,n=$.paginate._getDefaults($.paginate._defaults,s,"currentPage"),i=s.pageCount,g=[],o=s.bindEvent,l=$.paginate._getDefaults($.paginate._defaults,s,"styleClass"),r="",p="",u="",P=$.paginate._getDefaults($.paginate._defaults,s,"windowSize"),c=$.paginate._getDefaults($.paginate._defaults,s,"style");switch($.paginate._getDefaults($.paginate._defaults,s,"isGoTo")&&(u="<div class='bowknot-left'>��</div><input class='"+l.goInputClass+"' id='"+t+"PaginationInput'/><div class='bowknot-left'>ҳ</div>&nbsp;<button class='"+l.submitClass+"' id='"+t+"PaginationSubmit'>ȷ��</button>"),$.paginate._getDefaults($.paginate._defaults,s,"isPageCount")&&(p="<div class='bowknot-left'>&nbsp;��"+i+"ҳ&nbsp;</div>"),c){case"taobao":g=this._getTaobaoPages(n,i);break;case"google":g=this._getGooglePages(n,i,P);break;default:alert("has no style!")}for(var d=0;d<g.length;d++){var f=" class='"+l.pageClass+"'",h=0,v=0;if(g[d]===n&&(f=" class='"+l.pageCurrentClass+"'"),"number"==typeof g[d])h=v=g[d];else{var C=g[d].split("&");h=parseInt(C[0]),v=C[1],">"===v&&(f=" class='"+l.nextPageClass+"'"),"<"===v&&(f=" class='"+l.prePageClass+"'")}r+="<span title='"+h+"' onclick=\"jQuery.paginate._changePages('"+t+"');"+o+"("+h+')"'+f+">"+v+"</span>"}1!==g[0]&&(s.previousPage&&(r="<span class='"+l.prePageClass+"' title='"+(n-1)+"' onclick=\"jQuery.paginate._changePages('"+t+"');"+o+"("+(n-1)+');">'+s.previousPage+"</span>"+r),s.firstPage&&(r="<span title='1' class='"+l.firstPageClass+"' onclick=\"jQuery.paginate._changePages('"+t+"');"+o+'(1);">'+s.firstPage+"</span>"+r)),g[g.length-1]!==i&&(s.nextPage&&(r+="<span class='"+l.nextPageClass+"' title='"+(n+1)+"' onclick=\"jQuery.paginate._changePages('"+t+"');"+o+"("+(n+1)+');">'+s.nextPage+"</span>"),s.lastPage&&(r+="<span class='"+l.lastPageClass+"' title='"+i+"' onclick=\"jQuery.paginate._changePages('"+t+"');"+o+"("+i+');">'+s.lastPage+"</span>")),$("#"+t+"Pagination").html(r+p+u),$("#"+t+"Pagination span").mouseover(function(){$(this).hasClass(l.prePageClass)?this.className=l.prePageHoverClass:$(this).hasClass(l.nextPageClass)?this.className=l.nextPageHoverClass:$(this).addClass(l.pageHoverClass)}).mouseout(function(){$(this).hasClass(l.prePageHoverClass)?this.className=l.prePageClass:$(this).hasClass(l.nextPageHoverClass)?this.className=l.nextPageClass:$(this).removeClass(l.pageHoverClass)}),$("#"+t+"PaginationInput").bind("keypress",{target:a},$.paginate._goToPage).focus(),$("#"+t+"PaginationSubmit").bind("click",{target:a},$.paginate._goToPage)},_changePages:function(a){var e=a;"string"==typeof a&&(e=$("#"+a)[0]),$.paginate._build(e)},_goToPage:function(event){var target=event.data.target,inst=$.paginate._getInst(target),id=inst.id,settings=inst.settings,currentPage=parseInt($("#"+id+"PaginationInput").val());(-1===this.id.search(/PaginationInput/)||13===event.keyCode)&&(settings.currentPage=parseInt($("#"+id+"PaginationInput").val()),currentPage>0&&currentPage<=settings.pageCount?(eval(settings.bindEvent+"("+currentPage+");"),$.paginate._changePages(id)):settings.errorMessage&&(alert(settings.errorMessage),$("#"+id+"PaginationInput").val("")))},_getGooglePages:function(a,e,t){var s=[];if(t>e)for(var n=0;e>n;n++)s.push(n+1);else{var i=a-parseInt(t/2);i=1>i?1:i,i=i+t>e?e-t+1:i;for(var g=0;t>g;g++)s.push(i+g)}return s},_getTaobaoPages:function(a,e){var t=[],s=2,n=4,i=3,g=0,o=0,l=0;for(a>=n?(i=a-Math.ceil(n/2),o=a+Math.ceil(n/2)+1,g=e>o?o:e):n>a&&(o=a+Math.ceil(n/2)+1,g=e>o?o:e),3>i&&(i=3),s=i;g>=s;s++)t.push(s);for(i>3&&(l=2+(i-2),t.unshift(l+"&...")),s=2>e?0===a?0:1:2;s>=1;s-=1)t.unshift(s);return e>g&&(l=g+Math.ceil(n/2),l>e&&(l=e),t.push(l+"&...")),a>1&&t.splice(0,0,a-1+"&<"),e>a&&t.push(a+1+"&>"),t},_getDefaults:function(a,e,t){if("styleClass"===t){if("default"===e.theme||void 0===e.theme)return a.styleClass;e.styleClass={};for(var s in a[t])e.styleClass[s]=e.theme+"-"+a.styleClass[s]}else{if("height"===t&&"auto"!==e[t]||"width"===t)return null===e[t]||void 0===e[t]?a[t]+"px":e[t]+"px";if(null===e[t]||void 0===e[t])return a[t]}return e[t]}}),$.fn.paginate=function(a){var e=Array.prototype.slice.call(arguments);return this.each(function(){a.update?$.paginate._updatePagination(this,a.update):"string"==typeof a?$.paginate["_"+a+"Pagination"].apply($.paginate,[this].concat(e)):$.paginate._attach(this,a)})},$.paginate=new Paginate,window["DP_jQuery_"+dpuuid]=$}(jQuery);