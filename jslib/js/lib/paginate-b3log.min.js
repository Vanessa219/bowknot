!function(a){a.fn.extend({paginate:{version:"0.0.0.8",author:"lly219@gmail.com"}});var t=(new Date).getTime(),e="paginate",n=function(){this._defaults={styleClass:{pageCountClass:"paginate-pageCount",goPageClass:"paginate-goPage",inputPageClass:"paginate-inputPage",goPageHoverClass:"paginate-goPageHover",prePageClass:"paginate-prePage",nextPageClass:"paginate-nextPage",prePageDisableClass:"paginate-prePageDisable",nextPageDisableClass:"paginate-nextPageDisable",prePageHoverClass:"paginate-prePageHover",nextPageHoverClass:"paginate-nextPageHover",paginateClass:"paginate-paginate"}}};a.extend(n.prototype,{_attach:function(t,n){t.id||(this.uuid++,t.id="dp"+this.uuid);var s=this._newInst(a(t));s.settings=a.extend({errorMessage:"input error!"},n||{}),a.data(t,e,s),this._init(t)},_newInst:function(a){var t=a[0].id.replace(/([^A-Za-z0-9_])/g,"\\\\$1");return{id:t}},_getInst:function(t){try{return a.data(t,e)}catch(n){throw"Missing instance data for this paginate"}},_init:function(t){var e=this._getInst(t),n=e.id,s=e.settings;a("#"+n).html("<div id='"+n+"Paginate' class='"+this._getDefaults(a.paginate._defaults,s,"styleClass").paginateClass+"'></div>"),this._build(t)},_build:function(t){var e=this._getInst(t),n=e.id,s=e.settings,i=this._getDefaults(this._defaults,s,"styleClass"),g=s.pageCount,p=s.currentPage,r="<$tagStart class='button paginate-page'>                <span class='button-left'></span>                <span class='button-bg'>"+s.previousPageText+"</span>                <span class='button-right'></span>            </$tagEnd>",o="<$tagStart class='button paginate-page'>                <span class='button-left'></span>                <span class='button-bg'>"+s.nextPageText+"</span>                <span class='button-right'></span>            </$tagEnd>",l="",u="<span class='"+i.pageCountClass+"'>"+p+"/"+g+"</span>",c="<div class='button'>                <span class='button-left'></span>                <span class='button-bg'>                    <input class='"+i.inputPageClass+"' id='"+n+"PaginateInput'/>                </span>                <span class='button-right'></span>            </div>            <a href='javascript:void(0);' class='button' id='"+n+"PaginateSubmit'>                <span class='button-left'></span>                <span class='button-bg'>"+s.goText+"</span>                <span class='button-right'></span>            </a>";switch(r=1===p||0===p?r.replace("$tagStart","div").replace("$tagEnd","div"):r.replace("$tagStart","a href='javascript:void(0)'").replace("$tagEnd","a"),o=p!==g?o.replace("$tagStart","a href='javascript:void(0)'").replace("$tagEnd","a"):o.replace("$tagStart","div").replace("$tagEnd","div"),s.type){case"taobao":var d=this._getTaobaoPages(p,g),h="";c="";for(var P=0;P<d.length;P++)h=p===d[P].pageNum?" pagination-current-page":"",l+="<span data-page='"+d[P].pageNum+"' class='pagination-pages"+h+"'>"+d[P].text+"</span>";break;case"custom":for(var d=s.custom,h="",P=0;P<d.length;P++)h=p===d[P]?" pagination-current-page":"",l+="<span data-page='"+d[P]+"' class='pagination-pages"+h+"'>"+d[P]+"</span>"}1===g?a("#"+n+"Paginate").html(u):a("#"+n+"Paginate").html(r+l+o+u+c),this._bindEvent(t)},_getTaobaoPages:function(a,t){var e=[],n=2,s=4,i=3,g=0,p=0,r=0;for(a>=s?(i=a-Math.ceil(s/2),p=a+Math.ceil(s/2)+1,g=t>p?p:t):s>a&&(p=a+Math.ceil(s/2)+1,g=t>p?p:t),3>i&&(i=3),n=i;g>=n;n++)e.push({pageNum:n,text:n});for(i>3&&(r=2+(i-2),e.unshift({pageNum:r,text:"..."})),n=2>t?0===a?0:1:2;n>=1;n-=1)e.unshift({pageNum:n,text:n});return t>g&&(r=g+Math.ceil(s/2),r>t&&(r=t),e.push({pageNum:r,text:"..."})),e},_bindEvent:function(t){var e=this._getInst(t),n=e.id;a("#"+n+"PaginateInput").bind("keypress",{target:t},function(t){13===t.keyCode&&a.paginate._goToPageAction(t)}),a("#"+n+"Paginate .pagination-pages").bind("click",{target:t,isPage:!0},function(t){a.paginate._goToPageAction(t)}),a("#"+n+"PaginateSubmit").bind("click",{target:t},this._goToPageAction),a("#"+n+"Paginate a.paginate-page").bind("click",{target:t,isPage:!0},function(t){a.paginate._goToPageAction(t)})},_goToPageAction:function(t){var e=t.data.target,n=a.paginate._getInst(e),s=n.id,i=n.settings,g=a("#"+s+"PaginateInput").val();if(t.data.isPage){g=i.currentPage;var p=t.target.parentNode.innerText?t.target.parentNode.innerText:t.target.parentNode.text;a.trim(p)===i.previousPageText?g--:a.trim(p)===i.nextPageText?g++:g=parseInt(a(t.target).data("page"))}if(i.currentPage!==g){var r=/^[0-9]*[1-9][0-9]*$/;g>0&&g<=i.pageCount&&r.test(g)?i.bind(g):(i.bind(g,i.errorMessage),a("#"+s+"PaginateInput").val(""))}},_updatePaginate:function(t,e){e&&a.extend(this._getInst(t).settings,e),this._build(t)},_getDefaults:function(a,t,e){if("styleClass"===e){if("default"===t.theme||void 0===t.theme)return a.styleClass;t.styleClass={};for(var n in a[e])t.styleClass[n]=t.theme+"-"+a.styleClass[n]}else{if("height"===e&&"auto"!==t[e]||"width"===e)return null===t[e]||void 0===t[e]?a[e]+"px":t[e]+"px";if(null===t[e]||void 0===t[e])return a[e]}return t[e]},_destroyPaginate:function(){}}),a.fn.paginate=function(t){var e=Array.prototype.slice.call(arguments);return"string"==typeof t?(e.shift(),a.paginate["_"+t+"Paginate"].apply(a.paginate,[this[0]].concat(e))):this.each(function(){a.paginate._attach(this,t)})},a.paginate=new n,window["DP_jQuery_"+t]=a}(jQuery);