!function(t){t.fn.extend({chart:{version:"0.0.0.8",author:"lly219@gmail.com"}});var a=(new Date).getTime(),s="chart",e=17,i=function(){this._defaults={bgColors:["#FDEADA","#DBEEF3","#E5E0EC","#EBF1DD","#FFCBCC","#FBD5B5","#B7DDE8","#CCC1D9","#D7E3BC","#FF9999","#FAC08F","#92CDDC","#B2A2C7","#C3D69B","#FF6566","#E36C09","#31859B","#5F487A"],styleClass:{hbPicClass:"chart-hb-pic",hbCountClass:"chart-hb-count",hbBarClass:"chart-bh-bar",panelClass:"chart-panel",vbBarClass:"chart-vb-bar",vbPicClass:"chart-vb-pic",vbMarkClass:"chart-vb-mark"}},this._settingsDataFormat={}};t.extend(i.prototype,{_attach:function(a,e){a.id||(this.uuid++,a.id="dp"+this.uuid);var i=this._newInst(t(a));i.settings=t.extend({},e||{}),t.data(a,s,i),this._init(a)},_newInst:function(t){var a=t[0].id.replace(/([^A-Za-z0-9_])/g,"\\\\$1");return{id:a}},_getInst:function(a){try{return t.data(a,s)}catch(e){throw"Missing instance data for this chart"}},_destroyChart:function(){},_init:function(a){var s=this._getInst(a),e=s.id,i=s.settings;switch(t("#"+e).html("<div id='"+e+"Chart' style='height:"+i.height+"px;width:"+i.width+"px' class='"+t.chart._getDefaults(this._defaults,i,"styleClass").panelClass+"'></div>"),i.type){case"hb":this._horizontalBar(e+"Chart",i);break;case"vb":this._verticalBar(e+"Chart",i);break;default:alert("type is error!")}},_verticalBar:function(a,s){for(var e=t.chart._defaults.bgColors,i=s.data,r=s.loading,l=t.chart._getDefaults(this._defaults,s,"styleClass"),n=this._getMaxCount(i),h=30,o=s.width-32,c=s.height-36,d=Math.floor(o/i.length*2/3-2),u="",g="margin:0 "+Math.floor(o/i.length/6)+"px; ",v="",f=0;f<i.length;f++){var C=i[f].title,p=i[f].count,_=e[f%18],b="",y=Math.floor(p*c/n),m=c-y;0>=n&&(m=c),p>-1&&(b="<span>"+p+"</span><div class='"+l.vbPicClass+"' style='width:"+d+"px;background-color:"+_+"; height:"+y+"px;'></div>");for(var x=0;x<r.length;x++)r[x]===C.toString()&&(b=s.loadingHTML?s.loadingHTML:"loading...",m=c);u+="<div class='left "+l.vbBarClass+"' style='"+g+"margin-top:"+m+"px;width:"+d+"px'>"+b+"<div>"+C+"</div></div>"}if(i.length>0){v="<div class='"+l.vbMarkClass+"' style='width:"+h+"px;' class='left'>";for(var M=5;M>0;M--){var B=c/5-5;v+=5==M?"<div>"+n+"</div>":1==M?"<div style='margin-top:"+B+"px'>0</div>":"<div style='margin-top:"+B+"px'>"+Math.ceil(n/5)*M+"</div>"}}document.getElementById(a).innerHTML=v+"</div>"+u},_horizontalBar:function(a,s){for(var i=t.chart._defaults.bgColors,r=s.data,l=s.loading?s.loading:[],n=t.chart._getDefaults(this._defaults,s,"styleClass"),h=this._getMaxCount(r),o=Math.floor(2*s.width/5-2-e),c=Math.floor(3*s.width/5),d="",u=0;u<r.length;u++){var g=r[u].title,v="",f=r[u].count,C="",p=Math.floor(f*c/h),_=i[u%18];g.length>7?(v=g.substr(0,6),v+="..."):v=g,f>-1&&(C="<div class='left "+n.hbPicClass+"' style='background-color:"+_+"; width:"+p+"px'></div>");for(var b=0;b<l.length;b++)l[b]===g&&(C=s.loadingHTML?s.loadingHTML:"loading...");d+="<div class='"+n.hbBarClass+"'><span class='left' style='width:"+o+"px' title='"+g+"'>"+v+"ï¼š<span class='"+n.hbCountClass+"'>"+f+"</span></span>"+C+"<div class='clear'></div></div>"}document.getElementById(a).innerHTML=d+"<div class='clear'></div>",t("#"+a).attr("scrollHeight")<t("#"+a).attr("clientHeight")&&t("#"+a).css("margin-left",e/2)},_getMaxCount:function(a){for(var s=[],e=0;e<a.length;e++)s[e]=a[e].count;return t.chart._getMaxNumber(s)},_getMaxNumber:function(a){return a.sort(t.chart._sortNumber),a[a.length-1]},_sortNumber:function(t,a){return t-a},_getDefaults:function(t,a,s){if("styleClass"===s){if("default"===a.theme||void 0===a.theme)return t.styleClass;a.styleClass={};for(var e in t[s])a.styleClass[e]=a.theme+"-"+t.styleClass[e]}else{if("height"===s&&"auto"!==a[s]||"width"===s)return null===a[s]||void 0===a[s]?t[s]+"px":a[s]+"px";if(null===a[s]||void 0===a[s])return t[s]}return a[s]}}),t.fn.chart=function(a){var s=Array.prototype.slice.call(arguments);return this.each(function(){"string"==typeof a?t.chart["_"+a+"Chart"].apply(t.chart,[this].concat(s)):t.chart._attach(this,a)})},t.chart=new i,window["DP_jQuery_"+a]=t}(jQuery);